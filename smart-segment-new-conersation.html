<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Context-Keeper Segment Selection</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: rgba(0, 0, 0, 0.7);
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }
    
    .context-dialog {
      background: white;
      width: 750px;
      max-width: 90vw;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      display: flex;
      flex-direction: column;
      max-height: 90vh;
    }
    
    .dialog-header {
      padding: 16px 20px;
      border-bottom: 1px solid #e1e4e8;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .dialog-title {
      font-size: 18px;
      font-weight: 600;
    }
    
    .dialog-subtitle {
      color: #666;
      font-size: 13px;
      margin-top: 4px;
    }
    
    .ranking-info {
      background: #f6f8fa;
      padding: 12px 20px;
      border-bottom: 1px solid #e1e4e8;
      font-size: 14px;
      display: flex;
      justify-content: space-between;
    }
    
    .ranking-item {
      display: flex;
      align-items: center;
    }
    
    .ranking-icon {
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 8px;
      border-radius: 4px;
    }
    
    .semantic-icon {
      background: #0366d6;
      color: white;
    }
    
    .memory-icon {
      background: #28a745;
      color: white;
    }
    
    .adaptive-icon {
      background: #6f42c1;
      color: white;
    }
    
    .quick-context {
      background: #fff8c5;
      padding: 12px 20px;
      border-bottom: 1px solid #ffe3a1;
      font-size: 14px;
    }
    
    .quick-title {
      font-weight: 600;
      margin-bottom: 8px;
    }
    
    .quick-pills {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    
    .context-pill {
      background: #f6f8fa;
      border: 1px solid #ddd;
      padding: 6px 12px;
      border-radius: 16px;
      cursor: pointer;
      font-size: 13px;
      display: flex;
      align-items: center;
    }
    
    .context-pill:hover {
      background: #f1f8ff;
      border-color: #0366d6;
    }
    
    .context-pill.selected {
      background: #0366d6;
      border-color: #0366d6;
      color: white;
    }
    
    .pill-score {
      background: rgba(255,255,255,0.2);
      border-radius: 10px;
      padding: 2px 6px;
      margin-left: 6px;
      font-size: 11px;
    }
    
    .dialog-controls {
      display: flex;
      border-bottom: 1px solid #e1e4e8;
      padding: 12px 20px;
    }
    
    .search-box {
      flex: 1;
      position: relative;
      margin-right: 12px;
    }
    
    .search-icon {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      color: #6a737d;
    }
    
    .search-input {
      width: 100%;
      padding: 8px 8px 8px 34px;
      border-radius: 4px;
      border: 1px solid #ddd;
      box-sizing: border-box;
    }
    
    .filter-controls {
      display: flex;
      gap: 8px;
    }
    
    .sort-dropdown {
      min-width: 160px;
    }
    
    .type-dropdown {
      min-width: 120px;
    }
    
    .segment-list {
      flex: 1;
      overflow-y: auto;
      padding: 0;
    }
    
    .conversation-group {
      margin-bottom: 12px;
      border-left: 3px solid #0366d6;
      background: #f6f8fa;
    }
    
    .group-header {
      padding: 8px 12px;
      font-weight: 600;
      background: #f1f8ff;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .group-title {
      display: flex;
      align-items: center;
    }
    
    .group-icon {
      margin-right: 8px;
      color: #0366d6;
    }
    
    .group-actions {
      display: flex;
      gap: 8px;
    }
    
    .group-button {
      background: #0366d6;
      color: white;
      border: none;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      cursor: pointer;
    }
    
    .segment-item {
      padding: 12px 16px 12px 20px;
      border-bottom: 1px solid #eaecef;
      display: flex;
      cursor: pointer;
      position: relative;
    }
    
    .segment-item:hover {
      background-color: #f5f7fa;
    }
    
    .segment-item.selected {
      background-color: #f1f8ff;
    }
    
    .segment-checkbox {
      margin-right: 12px;
      align-self: flex-start;
      margin-top: 2px;
    }
    
    .segment-details {
      flex: 1;
    }
    
    .segment-content {
      font-size: 14px;
      margin-bottom: 8px;
      color: #24292e;
    }
    
    .segment-meta {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: #666;
    }
    
    .segment-scores {
      display: flex;
      gap: 8px;
    }
    
    .score-badge {
      display: flex;
      align-items: center;
      gap: 4px;
    }
    
    .score-icon {
      width: 12px;
      height: 12px;
      border-radius: 2px;
    }
    
    .segment-type {
      position: absolute;
      right: 16px;
      top: 12px;
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 4px;
      background: #f6f8fa;
    }
    
    .segment-type.code {
      background: #e6f7ff;
      color: #0366d6;
    }
    
    .segment-type.decision {
      background: #e6ffec;
      color: #28a745;
    }
    
    .segment-type.discussion {
      background: #fff8e6;
      color: #f78200;
    }
    
    .selected-panel {
      background: #f6f8fa;
      border-top: 1px solid #e1e4e8;
      padding: 16px 20px;
    }
    
    .selected-title {
      font-weight: 600;
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .selected-count {
      font-size: 13px;
      color: #666;
      display: flex;
      align-items: center;
    }
    
    .selected-tokens {
      background: #f1f8ff;
      color: #0366d6;
      padding: 2px 6px;
      border-radius: 10px;
      margin-left: 8px;
    }
    
    .selected-items {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      max-height: 80px;
      overflow-y: auto;
    }
    
    .selected-item {
      background: #0366d6;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      display: flex;
      align-items: center;
    }
    
    .remove-selected {
      margin-left: 6px;
      cursor: pointer;
    }
    
    .instructions-section {
      background: #fff;
      border-top: 1px solid #e1e4e8;
      padding: 16px 20px;
    }
    
    .instructions-title {
      font-weight: 600;
      margin-bottom: 8px;
    }
    
    .instructions-textarea {
      width: 100%;
      min-height: 60px;
      padding: 8px;
      border-radius: 4px;
      border: 1px solid #ddd;
      box-sizing: border-box;
      resize: vertical;
      font-family: inherit;
      font-size: 14px;
    }
    
    .dialog-footer {
      padding: 16px 20px;
      border-top: 1px solid #e1e4e8;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .dialog-help {
      color: #6a737d;
      font-size: 13px;
    }
    
    .dialog-actions {
      display: flex;
    }
    
    button {
      background: #0366d6;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 500;
      margin-left: 8px;
    }
    
    button:hover {
      background: #0256b9;
    }
    
    button.secondary {
      background: transparent;
      color: #0366d6;
      border: 1px solid #0366d6;
    }
    
    button.secondary:hover {
      background: rgba(3, 102, 214, 0.1);
    }
    
    .feedback-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #0366d6;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 30px;
      display: flex;
      align-items: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    
    .feedback-icon {
      margin-right: 8px;
    }
  </style>
</head>
<body>
  <div class="context-dialog">
    <div class="dialog-header">
      <div>
        <div class="dialog-title">Smart Segment Selection</div>
        <div class="dialog-subtitle">Segmented context for more precise retrieval</div>
      </div>
    </div>
    
    <div class="ranking-info">
      <div class="ranking-item">
        <div class="ranking-icon semantic-icon">S</div>
        <div>Semantic: 40%</div>
      </div>
      <div class="ranking-item">
        <div class="ranking-icon memory-icon">M</div>
        <div>Memory: 35%</div>
      </div>
      <div class="ranking-item">
        <div class="ranking-icon adaptive-icon">A</div>
        <div>Adaptive: 25%</div>
      </div>
      <div>Current weighting based on your usage patterns</div>
    </div>
    
    <div class="quick-context">
      <div class="quick-title">Quick Select: Recommended Segments</div>
      <div class="quick-pills">
        <div class="context-pill selected">
          ChatGPT Conversation Limits<span class="pill-score">92%</span>
        </div>
        <div class="context-pill">
          Ebbinghaus Implementation<span class="pill-score">85%</span>
        </div>
        <div class="context-pill">
          Memory Module Design<span class="pill-score">79%</span>
        </div>
        <div class="context-pill">
          Token Management<span class="pill-score">76%</span>
        </div>
        <div class="context-pill">
          Vector Embedding Setup<span class="pill-score">72%</span>
        </div>
      </div>
    </div>
    
    <div class="dialog-controls">
      <div class="search-box">
        <div class="search-icon">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M11.5 7a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z"/>
          </svg>
        </div>
        <input type="text" class="search-input" placeholder="Search for relevant segments...">
      </div>
      
      <div class="filter-controls">
        <select class="sort-dropdown">
          <option>Sort: Combined Score</option>
          <option>Sort: Semantic Relevance</option>
          <option>Sort: Memory Strength</option>
          <option>Sort: Most Recent</option>
        </select>
        
        <select class="type-dropdown">
          <option>All Types</option>
          <option>Code</option>
          <option>Discussion</option>
          <option>Decision</option>
        </select>
      </div>
    </div>
    
    <div class="segment-list">
      <div class="conversation-group">
        <div class="group-header">
          <div class="group-title">
            <div class="group-icon">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0zM8 0a8 8 0 100 16A8 8 0 008 0zM5 8a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zM5.32 9.636a.75.75 0 011.038.175l.007.009c.103.118.22.222.35.31.264.178.683.37 1.285.37.602 0 1.02-.192 1.285-.371.13-.088.247-.192.35-.31l.007-.008a.75.75 0 111.222.87l-.614-.431c.614.43.614.431.613.431v.001l-.001.002-.002.003-.005.007-.014.019a1.984 1.984 0 01-.184.213c-.16.166-.338.316-.53.445-.63.418-1.37.638-2.127.629-.946 0-1.652-.308-2.126-.63a3.32 3.32 0 01-.715-.657l-.014-.02-.005-.006-.002-.003v-.002h-.001l.613-.432-.614.43a.75.75 0 01.183-1.044h.001z"/>
              </svg>
            </div>
            Overcoming ChatGPT Conversation Duration Limits
          </div>
          <div class="group-actions">
            <button class="group-button">Select All (4)</button>
            <button class="group-button" style="background: #ddd; color: #333;">Show All</button>
          </div>
        </div>
        
        <div class="segment-item selected">
          <input type="checkbox" class="segment-checkbox" checked>
          <div class="segment-details">
            <div class="segment-content">
              "Conversations typically 'die' at around 200,000 tokens according to user experience, and monitoring this count can help predict when the limit will be reached."
            </div>
            <div class="segment-meta">
              <div>May 5, 2025 • Claude</div>
              <div class="segment-scores">
                <div class="score-badge">
                  <div class="score-icon semantic-icon"></div>
                  95%
                </div>
                <div class="score-badge">
                  <div class="score-icon memory-icon"></div>
                  89%
                </div>
              </div>
            </div>
          </div>
          <div class="segment-type">Technical Finding</div>
        </div>
        
        <div class="segment-item selected">
          <input type="checkbox" class="segment-checkbox" checked>
          <div class="segment-details">
            <div class="segment-content">
              "The issue might be a bug related to corrupted conversation trees, occurring when conversations get so long that browsers start to slow down between messages, potentially caused by high memory usage creating a race condition."
            </div>
            <div class="segment-meta">
              <div>May 5, 2025 • Claude</div>
              <div class="segment-scores">
                <div class="score-badge">
                  <div class="score-icon semantic-icon"></div>
                  92%
                </div>
                <div class="score-badge">
                  <div class="score-icon memory-icon"></div>
                  87%
                </div>
              </div>
            </div>
          </div>
          <div class="segment-type">Bug Theory</div>
        </div>
        
        <div class="segment-item">
          <input type="checkbox" class="segment-checkbox">
          <div class="segment-details">
            <div class="segment-content">
              "Token Management via Browser Extension: Using a Chrome extension called 'ChatGPT Token Counter' can help users monitor when they're approaching the limit (approximately 200,000 tokens), allowing them to take preventive measures before the conversation gets blocked."
            </div>
            <div class="segment-meta">
              <div>May 5, 2025 • Claude</div>
              <div class="segment-scores">
                <div class="score-badge">
                  <div class="score-icon semantic-icon"></div>
                  88%
                </div>
                <div class="score-badge">
                  <div class="score-icon memory-icon"></div>
                  84%
                </div>
              </div>
            </div>
          </div>
          <div class="segment-type">Solution</div>
        </div>
      </div>
      
      <div class="conversation-group">
        <div class="group-header">
          <div class="group-title">
            <div class="group-icon">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0zM8 0a8 8 0 100 16A8 8 0 008 0zM5 8a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zM5.32 9.636a.75.75 0 011.038.175l.007.009c.103.118.22.222.35.31.264.178.683.37 1.285.37.602 0 1.02-.192 1.285-.371.13-.088.247-.192.35-.31l.007-.008a.75.75 0 111.222.87l-.614-.431c.614.43.614.431.613.431v.001l-.001.002-.002.003-.005.007-.014.019a1.984 1.984 0 01-.184.213c-.16.166-.338.316-.53.445-.63.418-1.37.638-2.127.629-.946 0-1.652-.308-2.126-.63a3.32 3.32 0 01-.715-.657l-.014-.02-.005-.006-.002-.003v-.002h-.001l.613-.432-.614.43a.75.75 0 01.183-1.044h.001z"/>
              </svg>
            </div>
            Memory Module Implementation
          </div>
          <div class="group-actions">
            <button class="group-button">Select All (3)</button>
            <button class="group-button" style="background: #ddd; color: #333;">Show All</button>
          </div>
        </div>
        
        <div class="segment-item selected">
          <input type="checkbox" class="segment-checkbox" checked>
          <div class="segment-details">
            <div class="segment-content">
              "The Ebbinghaus forgetting curve shows memory retention declines rapidly shortly after learning (up to 70% lost within a day) before gradually slowing, highlighting the importance of regular reinforcement for long-term memory."
            </div>
            <div class="segment-meta">
              <div>April 28, 2025 • ChatGPT</div>
              <div class="segment-scores">
                <div class="score-badge">
                  <div class="score-icon semantic-icon"></div>
                  86%
                </div>
                <div class="score-badge">
                  <div class="score-icon memory-icon"></div>
                  60%
                </div>
              </div>
            </div>
          </div>
          <div class="segment-type">Concept</div>
        </div>
        
        <div class="segment-item">
          <input type="checkbox" class="segment-checkbox">
          <div class="segment-details">
            <div class="segment-content">
              "Implement the exponential decay model from the Ebbinghaus theory: R = e^(-t/S), where R is retrievability, t is time elapsed, and S is memory strength."
            </div>
            <div class="segment-meta">
              <div>April 28, 2025 • ChatGPT</div>
              <div class="segment-scores">
                <div class="score-badge">
                  <div class="score-icon semantic-icon"></div>
                  82%
                </div>
                <div class="score-badge">
                  <div class="score-icon memory-icon"></div>
                  58%
                </div>
              </div>
            </div>
          </div>
          <div class="segment-type">Formula</div>
        </div>
      </div>
    </div>
    
    <div class="selected-panel">
      <div class="selected-title">
        Selected Segments
        <div class="selected-count">
          4 segments <span class="selected-tokens">~1,200 tokens</span>
        </div>
      </div>
      
      <div class="selected-items">
        <div class="selected-item">
          Conversations typically 'die' at around 200,000 tokens...
          <div class="remove-selected">×</div>
        </div>
        <div class="selected-item">
          The issue might be a bug related to corrupted conversation trees...
          <div class="remove-selected">×</div>
        </div>
        <div class="selected-item">
          The Ebbinghaus forgetting curve shows memory retention...
          <div class="remove-selected">×</div>
        </div>
        <div class="selected-item">
          One more selected segment...
          <div class="remove-selected">×</div>
        </div>
      </div>
    </div>
    
    <div class="instructions-section">
      <div class="instructions-title">Custom Instructions for Continuation</div>
      <textarea class="instructions-textarea" placeholder="Add custom instructions for how the AI should continue the conversation...">I'd like you to read these segments about ChatGPT conversation limits and memory implementation, then continue our discussion about implementing token limit handling in a Chrome extension.</textarea>
    </div>
    
    <div class="dialog-footer">
      <div class="dialog-help">
        4 segments selected • Combined Score: 89% (S: 91%, M: 75%, A: 82%)
      </div>
      <div class="dialog-actions">
        <button class="secondary">Cancel</button>
        <button>Continue Conversation</button>
      </div>
    </div>
  </div>
  
  <button class="feedback-button">
    <div class="feedback-icon">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" d="M7.75 2a.75.75 0 01.75.75V7h4.25a.75.75 0 110 1.5H8.5v4.25a.75.75 0 11-1.5 0V8.5H2.75a.75.75 0 010-1.5H7V2.75A.75.75 0 017.75 2z"/>
      </svg>
    </div>
    Feedback
  </button>
</body>
</html>
